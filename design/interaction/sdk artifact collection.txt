title Plugin collection

participant Collection
participant RowSource
participant ArtifactSource
participant ArtifactLoader
participant ArtifactMapper

[->Collection:Collect
activate Collection
Collection->RowSource:Collect
activate RowSource
RowSource->ArtifactSource:DiscoverArtifacts
activate ArtifactSource

ArtifactSource->RowSource:Notify(ArtifactDiscovered)
activate RowSource
RowSource->RowSource:artifactWg.Add(1)
RowSource->ArtifactSource:DownloadArtifact
deactivate RowSource
activate ArtifactSource
ArtifactSource->RowSource:Notify(ArtifactDownloaded)
deactivate ArtifactSource
activate RowSource
RowSource->ArtifactLoader:Load
activate ArtifactLoader
ArtifactLoader-->>RowSource:Data
deactivate ArtifactLoader
RowSource->ArtifactMapper:Map
activate ArtifactMapper
ArtifactMapper-->>RowSource:Data
deactivate ArtifactMapper
RowSource->RowSource:artifactWg.Done()
RowSource->Collection:Notify(Row)
deactivate RowSource


ArtifactSource->RowSource:Notify(ArtifactDiscovered)
activate RowSource
RowSource->RowSource:artifactWg.Add(1)
RowSource->ArtifactSource:DownloadArtifact
deactivate RowSource
activate ArtifactSource
ArtifactSource->RowSource:Notify(ArtifactDownloaded)
deactivate ArtifactSource
activate RowSource
RowSource->ArtifactLoader:Load
activate ArtifactLoader
ArtifactLoader-->>RowSource:Data
deactivate ArtifactLoader
RowSource->ArtifactMapper:Map
activate ArtifactMapper
ArtifactMapper-->>RowSource:Data
deactivate ArtifactMapper
RowSource->RowSource:artifactWg.Done()
RowSource->Collection:Notify(Row)
deactivate RowSource

RowSource->RowSource:artifactWg.Wait()

deactivate ArtifactSource
deactivate RowSource

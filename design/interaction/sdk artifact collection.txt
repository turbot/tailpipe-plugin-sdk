title Plugin collection

participant Collection
participant ArtifactSourceBase
participant ArtifactSource
participant ArtifactLoader
participant ArtifactMapper

[->Collection:Collect
activate Collection
Collection->ArtifactSourceBase:Collect
activate ArtifactSourceBase
ArtifactSourceBase->ArtifactSource:DiscoverArtifacts
activate ArtifactSource

ArtifactSource->ArtifactSourceBase:Notify(ArtifactDiscovered)
activate ArtifactSourceBase
ArtifactSourceBase->ArtifactSourceBase:artifactWg.Add(1)
ArtifactSourceBase->ArtifactSource:DownloadArtifact
deactivate ArtifactSourceBase
activate ArtifactSource
ArtifactSource->ArtifactSourceBase:Notify(ArtifactDownloaded)
deactivate ArtifactSource
activate ArtifactSourceBase
ArtifactSourceBase->ArtifactLoader:Load
activate ArtifactLoader
ArtifactLoader-->>ArtifactSourceBase:Data
deactivate ArtifactLoader
ArtifactSourceBase->ArtifactMapper:Map
activate ArtifactMapper
ArtifactMapper-->>ArtifactSourceBase:Data
deactivate ArtifactMapper
ArtifactSourceBase->ArtifactSourceBase:artifactWg.Done()
ArtifactSourceBase->Collection:Notify(Row)
deactivate ArtifactSourceBase


ArtifactSource->ArtifactSourceBase:Notify(ArtifactDiscovered)
activate ArtifactSourceBase
ArtifactSourceBase->ArtifactSourceBase:artifactWg.Add(1)
ArtifactSourceBase->ArtifactSource:DownloadArtifact
deactivate ArtifactSourceBase
activate ArtifactSource
ArtifactSource->ArtifactSourceBase:Notify(ArtifactDownloaded)
deactivate ArtifactSource
activate ArtifactSourceBase
ArtifactSourceBase->ArtifactLoader:Load
activate ArtifactLoader
ArtifactLoader-->>ArtifactSourceBase:Data
deactivate ArtifactLoader
ArtifactSourceBase->ArtifactMapper:Map
activate ArtifactMapper
ArtifactMapper-->>ArtifactSourceBase:Data
deactivate ArtifactMapper
ArtifactSourceBase->ArtifactSourceBase:artifactWg.Done()
ArtifactSourceBase->Collection:Notify(Row)
deactivate ArtifactSourceBase

ArtifactSourceBase->ArtifactSourceBase:artifactWg.Wait()

deactivate ArtifactSource
deactivate ArtifactSourceBase
